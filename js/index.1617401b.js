(function(e){function t(t){for(var o,i,l=t[0],s=t[1],u=t[2],c=0,d=[];c<l.length;c++)i=l[c],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&d.push(n[i][0]),n[i]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);m&&m(t);while(d.length)d.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],o=!0,l=1;l<r.length;l++){var s=r[l];0!==n[s]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=r[0]))}return e}var o={},n={index:0},a=[];function i(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=o,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(r,o,function(t){return e[t]}.bind(null,o));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var m=s;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},5463:function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var o=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("MainPage")],1)},a=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6 offset-md-3"},[r("HireTaxiForm",{on:{formSubmit:e.onFormSubmit}})],1)])]),r("SuccessModal",{attrs:{isShow:e.modalShow},on:{closeModal:e.onCloseModal}})],1)},l=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"hire-taxi-form"},[r("h1",{staticClass:"hire-taxi-head"},[e._v("Form To Hire A Taxi")]),r("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[r("FormControlGroup",{attrs:{label:"Your full name",name:"name",required:!0,formField:e.$v.form.name,disabled:e.loading},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),r("FormControlGroup",{attrs:{as:e.TextMaskComponent,mask:"+4400000000000",masked:!0,label:"Your mobile phone",name:"phone",type:"tel",placeholder:"+44XXXXXXXXXXX",required:!0,formField:e.$v.form.phone,errorMessage:e.$v.form.phone.isValidPhone?"":"Phone number is not valid",hint:"Use phone number in international UK format. e.g. +4402012341234",disabled:e.loading},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),r("FormControlGroup",{attrs:{as:e.TextMaskComponent,mask:"00/00/0000",label:"Date of arrival",name:"date",inputmode:"numeric",placeholder:"dd/mm/yyyy",required:!0,formField:e.$v.form.date,errorMessage:e.$v.form.date.isDateValid?e.$v.form.flightNumber.isDateFromFuture?"":"Date cannot be less than today":"Date is not valid",disabled:e.loading},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}}),r("div",{staticClass:"form-row"},[r("FormControlGroup",{staticClass:"col-md-6",attrs:{label:"Airport",name:"airport",required:!0,formField:e.$v.form.airport,controlType:"select",options:e.airportOptions,disabled:e.loading},model:{value:e.form.airport,callback:function(t){e.$set(e.form,"airport",t)},expression:"form.airport"}}),"heathrow"===e.form.airport?r("FormControlGroup",{staticClass:"col-md-6",attrs:{label:"Terminal",name:"terminal",controlType:"select",options:e.terminalOptions,disabled:e.loading},model:{value:e.form.terminal,callback:function(t){e.$set(e.form,"terminal",t)},expression:"form.terminal"}}):e._e()],1),r("FormControlGroup",{attrs:{label:"Airflight number",name:"flight-number",required:!0,formField:e.$v.form.flightNumber,errorMessage:e.$v.form.flightNumber.isFlightNumberValid?"":"Flight number is not valid",disabled:e.loading},model:{value:e.form.flightNumber,callback:function(t){e.$set(e.form,"flightNumber",t)},expression:"form.flightNumber"}}),r("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:e.loading}},[e.loading?r("span",[e._v("Loading...")]):r("span",[e._v("Confirm booking")])])],1)])},u=[],m=(r("96cf"),r("1da1")),c=r("1dce"),d=r("b5ae"),f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form-group",class:{"form-group-required":e.required}},[e.label?r("label",{staticClass:"control-label",attrs:{for:e.name}},[e._v(e._s(e.label))]):e._e(),r(e.control,e._b({tag:"component",staticClass:"form-control",class:{"is-invalid":e.formField&&e.formField.$error},attrs:{id:e.name,name:e.name},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},"component",e.$attrs,!1)),e.formField&&e.formField.$error?r("FormControlError",{attrs:{formField:e.formField,errorMessage:e.errorMessage}}):e._e(),e.hint?r("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[e._v(" "+e._s(e.hint)+" ")]):e._e()],1)},p=[],v=(r("caad"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.model,expression:"model",modifiers:{trim:!0}}],attrs:{type:"text"},domProps:{value:e.model},on:{input:function(t){t.target.composing||(e.model=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})}),b=[],h={name:"FormControlInput",props:{value:{type:String,required:!0}},computed:{model:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},g=h,x=r("2877"),$=Object(x["a"])(g,v,b,!1,null,null,null),y=$.exports,_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("select",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.model=t.target.multiple?r:r[0]}}},e._l(e.options,(function(t){return r("option",{key:t.value,domProps:{value:t.value}},[e._v(" "+e._s(t.label)+" ")])})),0)},C=[],F={name:"FormControlSelect",props:{value:{type:String,required:!0},options:{type:[Array],required:!0}},computed:{model:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},S=F,w=Object(x["a"])(S,_,C,!1,null,null,null),k=w.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return!1===e.formField.required?r("div",{staticClass:"invalid-feedback"},[e._v(" Required ")]):e.errorMessage?r("div",{staticClass:"invalid-feedback"},[e._v(" "+e._s(e.errorMessage)+" ")]):e._e()},M=[],q={name:"FormControlError",props:{formField:Object,errorMessage:String}},T=q,j=Object(x["a"])(T,O,M,!1,null,null,null),N=j.exports,P={name:"FormControlGroup",components:{FormControlInput:y,FormControlSelect:k,FormControlError:N},props:{value:String,controlType:{type:String,default:"input",validator:function(e){return["input","select"].includes(e)}},label:{type:String,default:""},name:{type:String,required:!0},hint:String,as:Object,required:Boolean,formField:Object,errorMessage:String},computed:{model:{get:function(){return this.value},set:function(e){this.formField&&this.formField.$touch(),this.$emit("input",e)}},control:function(){if(this.as)return this.as;switch(this.controlType){case"select":return k;default:return y}}}},D=P,E=Object(x["a"])(D,f,p,!1,null,null,null),X=E.exports,A=(r("a9e3"),r("4d63"),r("ac1f"),r("25f0"),r("5319"),r("1276"),r("397a")),G=function(e){var t=Object(A["a"])(e);return!(!t||!t.isValid())},H=function(e){var t=new RegExp(/(\d{2})\/(\d{2})\/(\d{4})/),r=e.replace(t,"$2/$1/$3");return Date.parse(r)},R=function(e){if(10!==e.length)return!1;var t=H(e);if(isNaN(t))return!1;var r=e.split("/"),o=new Date(t);return o&&o.getDate()===Number(r[0])&&o.getMonth()+1===Number(r[1])&&o.getFullYear()===Number(r[2])},V=function(e){var t=H(e),r=new Date;return r.setHours(0,0,0,0),R(e)&&t>=r},L=function(e){var t=new RegExp(/^[A-Z\d]{2}[A-Z]?\d{1,4}[A-Z]?$/);return t.test(e)},J=r("3f1c"),B="hireTaxiForm",I={name:"HireTaxiForm",mixins:[c["validationMixin"]],components:{FormControlGroup:X},data:function(){return{TextMaskComponent:J["a"],loading:!1,form:{name:"",phone:"",date:"",airport:"",terminal:"1",flightNumber:""},airportOptions:[{value:"",label:""},{value:"heathrow",label:"Heathrow"},{value:"gatwick",label:"Gatwick"}],terminalOptions:[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"not-sure",label:"not sure"}]}},validations:{form:{name:{required:d["required"]},phone:{required:d["required"],isValidPhone:G},date:{required:d["required"],isDateValid:R,isDateFromFuture:V},airport:{required:d["required"]},flightNumber:{required:d["required"],isFlightNumberValid:L}}},mounted:function(){},methods:{onSubmit:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log({formData:e.form}),e.$v.form.$touch(),e.$v.form.$error){t.next=11;break}return e.loading=!0,t.next=6,e.$api.hireTaxiService.bookTaxi(e.form);case 6:r=t.sent,console.log({result:r}),e.loading=!1,e.setFormDataToStorage(),e.$emit("formSubmit");case 11:case"end":return t.stop()}}),t)})))()},setFormDataToStorage:function(){var e=JSON.stringify(this.form);localStorage.setItem(B,e)}}},U=I,Y=(r("5719"),Object(x["a"])(U,s,u,!1,null,"76c7bb5a",null)),Z=Y.exports,K=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isShow?r("div",[r("div",{staticClass:"modal fade show",attrs:{tabindex:"-1","aria-labelledby":"exampleModalLiveLabel","aria-modal":"true",role:"dialog"}},[r("div",{staticClass:"modal-dialog"},[r("div",{staticClass:"modal-content"},[r("div",{staticClass:"modal-header"},[r("h3",{staticClass:"modal-title",attrs:{id:"exampleModalLiveLabel"}},[e._v(" Booking completed ")]),r("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:e.onClose}},[r("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])]),e._m(0),r("div",{staticClass:"modal-footer"},[r("a",{staticClass:"btn btn-primary",attrs:{href:"https://www.unbiased.co.uk/",target:"_blank"},on:{click:e.onClose}},[e._v(" Ok ")])])])])]),r("div",{staticClass:"modal-backdrop fade show"})]):e._e()},z=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"modal-body"},[r("p",[e._v("Taxi will wait you next to airport")])])}],Q={name:"SuccessModal",props:{isShow:{type:Boolean,default:!1}},methods:{onClose:function(){this.$emit("closeModal")}}},W=Q,ee=(r("fead"),Object(x["a"])(W,K,z,!1,null,"82ad8fd4",null)),te=ee.exports,re={name:"MainPage",components:{HireTaxiForm:Z,SuccessModal:te},data:function(){return{modalShow:!1}},methods:{onFormSubmit:function(){this.modalShow=!0},onCloseModal:function(){this.modalShow=!1}}},oe=re,ne=Object(x["a"])(oe,i,l,!1,null,null,null),ae=ne.exports,ie={name:"App",components:{MainPage:ae}},le=ie,se=Object(x["a"])(le,n,a,!1,null,null,null),ue=se.exports,me=(r("fb98"),r("d3b7"),{request:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST";return fetch("https://desolate-river-23256.herokuapp.com/graphql",{headers:{"content-type":"application/json"},method:t,body:JSON.stringify(e)})},responseHandler:function(e,t){return Object(m["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.then((function(e){return e.json()}));case 3:return r.abrupt("return",r.sent);case 6:if(r.prev=6,r.t0=r["catch"](0),!t){r.next=12;break}return r.abrupt("return",t);case 12:console.error(r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,6]])})))()}}),ce=me,de=function(e){return{bookTaxi:function(t){var r={query:"\n          mutation createTaxiOrder(\n            $name: String!,\n            $phone: String!,\n            $date: String!,\n            $airport: String!,\n            $terminal: String,\n            $flightNumber: String!,\n          ) {\n            createTaxiOrder(\n              name: $name,\n              phone: $phone,\n              date: $date,\n              airport: $airport,\n              terminal: $terminal,\n              flightNumber: $flightNumber,\n            ) {\n              name\n            }\n          }",variables:t};return e.responseHandler(e.request(r))}}},fe={hireTaxiService:de(ce)},pe={install:function(e){e.prototype.$api=fe}};o["a"].use(pe),new o["a"]({render:function(e){return e(ue)}}).$mount("#app")},5719:function(e,t,r){"use strict";r("5463")},"85b3":function(e,t,r){},fb98:function(e,t,r){},fead:function(e,t,r){"use strict";r("85b3")}});
//# sourceMappingURL=index.1617401b.js.map